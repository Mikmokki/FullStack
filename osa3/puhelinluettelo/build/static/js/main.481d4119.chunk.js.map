{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/personsData.js","components/Notification.js","App.js","index.js"],"names":["Filter","value","handler","onChange","PersonForm","handleSub","handleName","handleNumber","onSubmit","type","Persons","persons","fil","deletion","filter","p","name","toLowerCase","includes","map","person","number","onClick","id","baseUrl","axios","get","then","response","data","newObject","post","delete","put","Notification","message","style","className","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","errorMessage","setErrorMessage","setStyle","useEffect","personService","people","event","target","preventDefault","Object","x","window","confirm","find","catch","error","console","log","one","concat","setTimeout","n","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.481d4119.chunk.js","sourcesContent":["import React from 'react'\r\nconst Filter = ({ value, handler }) => (\r\n    <form>\r\n        filter shown with {\" \"}\r\n        <input\r\n            value={value}\r\n            onChange={handler} />\r\n    </form>)\r\nexport default Filter","import React from 'react'\r\nconst PersonForm = ({handleSub,handleName,handleNumber}) => (\r\n    <form onSubmit={handleSub}>\r\n        <div>name: <input onChange={handleName} /></div>\r\n        <div>number: <input onChange={handleNumber} /></div>\r\n        <div><button type=\"submit\">add</button></div>\r\n    </form>)\r\nexport default PersonForm","import React from 'react'\r\nconst Persons = ({ persons, fil, deletion }) => (\r\n\r\n    persons.filter(p => p.name.toLowerCase().includes(fil.toLowerCase())).map(person =>\r\n        <div>\r\n            <p key={person.name} >{person.name + \"  \" + person.number} </p>\r\n            <button onClick={deletion(person.name, person.id)}>Delete</button>\r\n        </div>\r\n    )\r\n)\r\nexport default Persons","import axios from \"axios\"\r\nconst baseUrl = \"/api/persons\"\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\nconst deleteP = id => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n    return request.then(response => response.data);\r\n}\r\nexport default {\r\n    getAll,\r\n    create,\r\n    deleteP,\r\n    update\r\n}","import React from 'react'\r\nconst Notification = ({ message, style }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className={style}>\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Notification","import React, { useState, useEffect } from 'react'\r\nimport Filter from \"./components/Filter\"\r\nimport PersonForm from \"./components/PersonForm\"\r\nimport Persons from \"./components/Persons\"\r\nimport personService from './services/personsData'\r\nimport Notification from \"./components/Notification\"\r\nconst App = () => {\r\n    const [persons, setPersons] = useState([])\r\n    const [newName, setNewName] = useState('')\r\n    const [newNumber, setNewNumber] = useState('')\r\n    const [newFilter, setNewFilter] = useState('')\r\n    const [errorMessage, setErrorMessage] = useState(null)\r\n    const [style, setStyle] = useState(\"alert\")\r\n    useEffect(() => {\r\n        personService\r\n            .getAll()\r\n            .then(people => {\r\n                setPersons(people)\r\n            })\r\n    }, [])\r\n    const submission = (event) => {\r\n        event.preventDefault()\r\n        const Object = {\r\n            name: newName,\r\n            number: newNumber\r\n        }\r\n        if (persons.map(x => x.name).includes(newName)) {\r\n            if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\r\n                Object.id = persons.find(p => p.name === newName).id\r\n                personService\r\n                    .update(Object.id, Object)\r\n                    .then(() => {\r\n                        setPersons(persons.map(p => (p.name === newName ? Object : p)))\r\n                        setStyle(\"alert\")\r\n                        setErrorMessage(`Updated ${Object.name}`)\r\n                        setNewName('')\r\n                        setNewNumber('')\r\n                    })\r\n                    .catch(error => {\r\n                        console.log(error);\r\n                        setStyle(\"error\")\r\n                        setErrorMessage(error)\r\n                    })\r\n            }\r\n        }\r\n        else {\r\n            personService.create(Object)\r\n                .then(one => {\r\n                    setPersons(persons.concat(one))\r\n                    setStyle(\"alert\")\r\n                    setErrorMessage(`Added ${Object.name}`)\r\n                    setNewName('')\r\n                    setNewNumber('')\r\n                })\r\n                .catch(error => {\r\n                    console.log(\"toimis jo\")\r\n                    console.log(error.response.data)\r\n                    setStyle(\"error\")\r\n                    setErrorMessage(error.response.data.error)\r\n                })\r\n\r\n        }\r\n        setTimeout(() => {\r\n            setErrorMessage(null);\r\n        }, 2500)\r\n    }\r\n    const handleNameChange = (event) => {\r\n        setNewName(event.target.value)\r\n    }\r\n    const handleNumberChange = (event) => {\r\n        setNewNumber(event.target.value)\r\n    }\r\n    const handleFilterChange = (event) => {\r\n        setNewFilter(event.target.value)\r\n    }\r\n    const handleDeletion = (name, id) => {\r\n        return () => {\r\n            if (window.confirm(`Delete ${name} ?`)) {\r\n                personService\r\n                    .deleteP(id)\r\n                    .then(() => {\r\n                        setPersons(persons.filter(n => n.id !== id))\r\n                        setStyle(\"alert\")\r\n                        setErrorMessage(`Deleted ${name}`)\r\n                        setNewName(\"\")\r\n                        setNewNumber(\"\")\r\n                    })\r\n                    .catch(error => {\r\n                        console.log(error);\r\n                        setStyle(\"error\")\r\n                        setErrorMessage(\"Deletion failed\")\r\n                    })\r\n\r\n                setTimeout(() => {\r\n                    setErrorMessage(null);\r\n                }, 2500)\r\n            }\r\n        }\r\n    }\r\n    return (\r\n        <div>\r\n            <h2>Phonebook</h2>\r\n            <Notification message={errorMessage} style={style} />\r\n            <Filter value={newFilter} handler={handleFilterChange} />\r\n            <PersonForm handleSub={submission} handleName={handleNameChange} handleNumber={handleNumberChange} />\r\n            <h2>Numbers</h2>\r\n            <Persons persons={persons} fil={newFilter} deletion={handleDeletion} />\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default App","import ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n  <App />, \r\n  document.getElementById('root')\r\n)"],"sourceRoot":""}